<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Lode Runner par Charles Morin et Andrew Aboujaoudé</title>
  <link rel="stylesheet" type="text/css" href="" />
  <!-- Code JavaScript local -->
  <script type="text/javascript"> 
	let objCanvas = null;
	let objC2D = null;
	let objCycleAnimation = null;

	//test
	objLadder = new Image();
	objLadder.src = 'ladder.png'
        
    function initAnimation() {
        objCanvas = document.getElementById('monCanvas');
		objCanvas.focus();
        objC2D = objCanvas.getContext('2d');
	    dessiner(); // Dessiner une première fois
        animer();  // animer
    }

    // Un cycle d'animation	
    function animer() {
        // Requête pour le prochain cycle
        objCycleAnimation = requestAnimationFrame(animer);

		// Le cycle d'animation
		effacerDessin();
		mettreAjourAnimation();
		dessiner();
	}

    // Arrêter l'animation
	function arreterAnimation() {
	    if (objCycleAnimation != null)
	        cancelAnimationFrame(objCycleAnimation);
		objCycleAnimation = null;
	}
		
	// Pour effacer le dessin
	function effacerDessin() {
		objC2D.clearRect(0,0, objCanvas.width, objCanvas.height); 
	}
	
	// Pour mettre à jour l'animation
	function mettreAjourAnimation() {
	}

    // Pour dessiner
	function dessiner() {
		dessinerBackground();
		dessinerLadder();
		//dessinerGrid();
	}

	
	function dessinerBackground() {
		objC2D.save();
		objC2D.fillStyle = 'black';
		objC2D.fillRect(0, 0, objCanvas.width, objCanvas.height);
		objC2D.restore();
	}

	function dessinerLadder() {
		objC2D.save();
		for(let i = 0; i < 28; i++) {
			for(let j = 0; j < 17; j++) {
				objC2D.drawImage(objLadder, i * 32, j * 32);
			}
		}
		objC2D.restore();
	}

	function dessinerGrid() {
		objC2D.save();
		for(let i = 0; i < 28; i++) {
			for(let j = 0; j < 17; j++) {
				objC2D.lineWidth = 2;
				objC2D.strokeStyle = 'green';
				objC2D.strokeRect(i * 32, j * 32, objCanvas.width, objCanvas.height);
			}
		}
		objC2D.restore();
	}



   </script>
</head>

<body onload="initAnimation()"> 
	<canvas id="monCanvas" width="896" height="544" tabIndex="1" onkeydown="">
		Votre navigateur ne supporte pas la balise canvas
	</canvas>
</body>

</html>